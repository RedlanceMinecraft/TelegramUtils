plugins {
    id 'maven-publish'
    id 'java-library'
    id 'java'
}

base.archivesName = rootProject.archives_base_name
version = rootProject.mod_version
group = rootProject.maven_group

repositories {
    maven {
        name "TDLight"
        url "https://mvn.mchv.eu/repository/mchv/"
    }
    maven {
        name "Redlance"
        url "https://repo.redlance.org/public"
    }
    mavenCentral()
    mavenLocal()
}

dependencies {
    implementation platform("it.tdlight:tdlight-java-bom:${rootProject.tdlight_version}")
    implementation group: 'it.tdlight', name: 'tdlight-java'
    implementation group: 'it.tdlight', name: 'tdlight-natives', classifier: 'windows_amd64'

    runtimeOnly "org.apache.logging.log4j:log4j-slf4j2-impl:2.24.2"
    implementation "org.redlance:common-utils:1.0.0"
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = "UTF-8"
    options.release.set 21
}

java {
    withSourcesJar()
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            artifactId = rootProject.archives_base_name

            from components.java
        }
    }

    repositories {
        mavenLocal()
    }
}
